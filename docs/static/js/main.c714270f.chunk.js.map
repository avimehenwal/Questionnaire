{"version":3,"sources":["QuestionnaireApp/component/Header/index.js","ContextStore/app-context.js","QuestionnaireApp/component/Question/InputBar/index.js","QuestionnaireApp/component/Question/index.js","QuestionnaireApp/component/Recommendations/index.js","QuestionnaireApp/AppData.js","QuestionnaireApp/index.js","ContextStore/app-actions.js","ContextStore/app-reducer.js","QuestionnaireApp/apis.js","ContextStore/AppStates.js","App.js","index.js"],"names":["Text","Typography","Title","Header","title","subtitel","currentQuestionIndex","total","type","align","justify","level","Footer","data","useState","showTrace","setShowTrace","onChange","e","target","checked","JSON","stringify","appContext","createContext","InputText","props","useContext","AppContext","app","saveAnswer","useEffect","ls","window","localStorage","getItem","name","currentQuestion","value","answers","console","log","placeholder","InputSelect","setValue","Object","keys","map","key","toUpperCase","Group","direction","Question","nextButtonCB","bordered","style","width","onClick","Recommendations","item","strong","price","amount","periodicity","banner","questionsData","1","2","3","QuestionnaireApp","nextQuestion","setTotalQuestions","questions","recommendations","recomm","setRecomm","length","totalQuestions","method","action","SET_JWT","SAVE_ANSWER","NEXT_QUESTION","JUMP_TO_EMAIL","SET_TOTAL_QUESTIONS","SET_RECOMMENDATIONS","reducerFunction","state","payload","setItem","parseInt","jwt","baseApi","axios","create","baseURL","timeout","headers","postFormData","body","a","hasOwnProperty","children","post","result","getRecommendations","get","dir","AppStates","useReducer","dispatchFn","setJwt","Provider","reducerFn","count","App","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c714270f.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { Row, Typography, Checkbox } from 'antd';\nconst { Text, Title } = Typography;\n\nexport const Header = ({ title, subtitel, currentQuestionIndex, total }) => {\n\n  return (\n    <header>\n      <br></br>\n      <Row type=\"flex\" align=\"middle\" justify=\"center\">\n        <Title level={2}>{title}</Title>\n        <br></br>\n      </Row>\n\n      <Row type=\"flex\" align=\"middle\" justify=\"center\">\n        <Text type=\"primary\">{subtitel} !!! </Text>\n      </Row><br></br>\n\n      <Row type=\"flex\" align=\"middle\" justify=\"center\">\n        <Text type=\"primary\">question {currentQuestionIndex}/{total}</Text>\n      </Row><br></br>\n\n      <br></br>\n      <br></br>\n    </header >\n  )\n}\n\n\nexport const Footer = ({ data }) => {\n  const [showTrace, setShowTrace] = useState(false)\n\n  function onChange(e) {\n    setShowTrace(e.target.checked)\n  }\n\n  return (\n    <footer>\n      <br></br>\n      <Row type=\"flex\" align=\"middle\" justify=\"center\">\n        <Checkbox onChange={onChange} checked={showTrace}>Log Debug Trace</Checkbox>\n      </Row><br></br>\n      {(showTrace) &&\n        <Row type=\"flex\" align=\"middle\" justify=\"center\">\n          <pre>{JSON.stringify(data, null, 2)}</pre>\n        </Row>\n      }\n    </footer>\n  )\n}","import { createContext } from 'react'\n\nconst appContext = createContext()\n\nexport default appContext","import React, { useState, useContext, useEffect } from 'react'\nimport { Input, Radio, Space } from 'antd';\nimport AppContext from '../../../../ContextStore/app-context'\n\n\nexport const InputText = (props) => {\n  const { app, saveAnswer } = useContext(AppContext)\n  // console.log(app.currentQuestion);\n\n  useEffect(() => {\n    const ls = window.localStorage\n    if (ls.getItem(props.name) !== null) {\n      saveAnswer(props.name, ls.getItem(props.name))\n    }\n  }, [app.currentQuestion, saveAnswer, props.name])\n\n  const inputHandler = (e) => {\n    console.log(e.target.value);\n    saveAnswer(props.name, e.target.value)\n  }\n\n  return (\n    <>\n      <Input\n        name={props.name}\n        value={app.answers[props.name]}\n        onChange={inputHandler}\n        placeholder={(app.answers[app.currentQuestion]) ? app.answers[app.currentQuestion] : props.placeholder}\n      />\n\n    </>\n  )\n}\n\n\nexport const InputSelect = ({ name, ...data }) => {\n  const [value, setValue] = useState(1)\n  const { app, saveAnswer } = useContext(AppContext)\n\n  useEffect(() => {\n    const ls = window.localStorage\n    if (ls.getItem(name) !== null) {\n      // console.log('SEL ' + ls.getItem(name));\n      saveAnswer(name, ls.getItem(name))\n      Object.keys(data).map(key => {\n        // console.log('SELECTION ' + key + name + ' is eq ' + data[key].toUpperCase());\n        if (data[key].toUpperCase() === ls.getItem(name)) {\n          // console.log('MATCH' + key);\n          return setValue(data[key])\n        } else return null\n      })\n    }\n  }, [app.currentQuestion, data, name, saveAnswer])\n\n  console.log('VALUE SET TO ' + value);\n\n\n  const inputHandler = (e) => {\n    console.log(e.target.value);\n    setValue(e.target.value)\n    saveAnswer(name, e.target.value.toUpperCase())\n  }\n\n  return (\n    <>\n      {/* <pre>{JSON.stringify(data, null, 4)}</pre> */}\n      <Radio.Group onChange={inputHandler} value={value} name={name} >\n        <Space direction=\"vertical\">\n\n          {Object.keys(data).map(key => (\n            <Radio key={key} value={data[key]}>{data[key]}</Radio>\n          ))}\n\n        </Space>\n      </Radio.Group>\n    </>\n  )\n}\n","import React from 'react'\nimport { Card, Row, Button } from 'antd';\nimport { InputText, InputSelect } from './InputBar'\n\n// { title = \"Card title\", type = \"select\", data }\nexport const Question = ({ title, type, data, nextButtonCB, name }) => {\n\n\n  return (\n    <>\n      <Row type=\"flex\" align=\"middle\" justify=\"center\">\n        <Card title={title} bordered={false} style={{ width: 500 }}>\n          <br></br>\n\n          {(type === 'text') && <InputText {...data} name={name} />}\n          {(type === 'select') && <InputSelect {...data} name={name} />}\n\n          <br></br>\n          <br></br>\n          <br></br>\n\n          <Button type=\"primary\" onClick={nextButtonCB}>Next Question</Button>\n\n        </Card>\n      </Row>\n    </>\n  )\n}\n","import React from 'react'\nimport { Card, Typography, Space, Row } from 'antd';\nconst { Text } = Typography;\n\nexport const Recommendations = ({ data }) => {\n  return (\n    <Row type=\"flex\" align=\"middle\" justify=\"center\">\n      <Card title=\"Recommendations\">\n        {data.map(item =>\n          <Card key={item.type} bordered={true} style={{ width: 500 }}>\n            <Space >\n              <Text strong>{item.type}</Text>\n              <Text>{item.price.amount} {item.price.periodicity}\n              </Text>\n            </Space>\n          </Card>\n        )\n        }\n      </Card>\n    </Row >\n  )\n}\n","export const banner = {\n  title: 'Questionnaire App',\n  subtitel: 'collect inputs from user and suggest recommendations',\n}\n\n\nexport const questionsData = [\n  {\n    title: 'What\\'s your first name?',\n    type: 'text',\n    name: 'firstName',\n    data: {\n      placeholder: 'eg: avi'\n    },\n  },\n  {\n    title: 'What\\'s your Address?',\n    type: 'text',\n    name: 'address',\n    data: {\n      placeholder: 'eg: abc, Berlin'\n    },\n  },\n  {\n    title: 'What\\'s your Occupation?',\n    type: 'select',\n    name: 'occupation',\n    data: {\n      1: 'Employed',\n      2: 'Student',\n      3: 'Self_Employed',\n    },\n  },\n\n  // make decision for next view\n  {\n    title: 'Do you have any children?',\n    type: 'select',\n    name: 'children',\n    data: {\n      1: 'Yes',\n      2: 'No',\n    },\n  },\n  {\n    title: 'How many children do you have?',\n    type: 'text',\n    name: 'numberOfChildren',\n    data: {\n      placeholder: 'eg: 1'\n    },\n  },\n\n  // last\n  {\n    title: 'Whats your email?',\n    type: 'text',\n    name: 'email',\n    data: {\n      placeholder: 'eg: abc@xyz.com'\n    },\n  },\n]","import React, { useState, useContext, useEffect } from 'react'\nimport { Header, Footer } from './component/Header'\nimport { Question } from './component/Question'\nimport { Recommendations } from './component/Recommendations'\nimport { banner, questionsData } from './AppData'\nimport AppContext from '../ContextStore/app-context'\n\n\nexport const QuestionnaireApp = () => {\n  // questions could be fetched from external API\n  const { app, nextQuestion, setTotalQuestions } = useContext(AppContext)\n  const [questions] = useState(questionsData)\n  const [recomm, setRecomm] = useState(app.recommendations)\n\n  useEffect(() => {\n    setTotalQuestions(questionsData.length)\n    setRecomm(app.recommendations)\n    return () => { }\n  }, [questions, app.recommendations, setTotalQuestions])\n\n\n  return (\n    <>\n      <Header {...banner} currentQuestionIndex={app.currentQuestion} total={app.totalQuestions} />\n      <main>\n        {(recomm.length > 0) ? <Recommendations data={recomm} /> :\n          <form name=\"questions\" method=\"post\" action=\"/some-api\">\n            {((app.totalQuestions + 1) > app.currentQuestion) &&\n              <Question\n                {...questions[app.currentQuestion - 1]}\n                nextButtonCB={nextQuestion}\n              />\n            }\n          </form>\n        }\n      </main>\n      <Footer data={app} />\n    </>\n  )\n}\n","export const SET_JWT = 'SET_JWT'\nexport const SAVE_ANSWER = 'SAVE_ANSWER'\nexport const NEXT_QUESTION = 'NEXT_QUESTION'\nexport const JUMP_TO_EMAIL = 'JUMP_TO_EMAIL'\n// export const PREVIOUS_QUESTION = 'PREVIOUS_QUESTION'\nexport const SET_TOTAL_QUESTIONS = 'SET_TOTAL_QUESTIONS'\nexport const SET_RECOMMENDATIONS = 'SET_RECOMMENDATIONS'","import {\n  SET_JWT,\n  SAVE_ANSWER,\n  NEXT_QUESTION,\n  JUMP_TO_EMAIL,\n  // PREVIOUS_QUESTION,\n  SET_RECOMMENDATIONS,\n  SET_TOTAL_QUESTIONS,\n} from './app-actions'\n\nexport const reducerFunction = (state, action) => {\n  switch (action.type) {\n\n    case NEXT_QUESTION:\n      // console.dir(state);\n      return {\n        ...state,\n        currentQuestion: state.currentQuestion + 1\n      }\n\n    // case PREVIOUS_QUESTION:\n    //   return {\n    //     ...state,\n    //     currentQuestion: state.currentQuestion - 1\n    //   }\n\n    case JUMP_TO_EMAIL:\n      state.answers['numberOfChildren'] = 0\n      return { ...state, currentQuestion: 6 }\n\n    case SET_TOTAL_QUESTIONS:\n      return {\n        ...state,\n        totalQuestions: action.payload\n      }\n\n    case SAVE_ANSWER:\n      const key = action.payload.key\n      const value = action.payload.value\n      // persist in local storage\n      let appStorage = window.localStorage;\n      appStorage.setItem(key, value)\n      console.log('LS:' + key + value);\n      if (key === 'numberOfChildren') {\n        state['answers'][key] = parseInt(value)\n      } else {\n        state['answers'][key] = value\n      }\n\n      console.log(state);\n      return {\n        ...state,\n      }\n\n    case SET_JWT:\n      return {\n        ...state,\n        jwt: action.payload\n      }\n\n    case SET_RECOMMENDATIONS:\n      return {\n        ...state,\n        recommendations: action.payload\n      }\n\n    default:\n      console.log('No case matched')\n  }\n}\n","import axios from 'axios'\n\nconst baseApi = axios.create({\n  baseURL: 'https://challenge-dot-popsure-204813.appspot.com/',\n  timeout: 1000,\n  headers: { 'Content-Type': 'application/json' },\n});\n\n\n// const sampleBody = {\n//   \"firstName\": \"Jane\",\n//   \"address\": \"Lohmühlenstraße 65\",\n//   \"numberOfChildren\": 2,\n//   \"occupation\": \"EMPLOYED\",\n//   \"email\": \"jane.doe@getpopsure.com\"\n// }\n\nexport const postFormData = async (body) => {\n  (body.hasOwnProperty('children')) && delete body.children\n  // console.dir(body)\n  const result = await baseApi.post('/user', body)\n  return result.data\n}\n\nexport const getRecommendations = async (jwt) => {\n  const result = await baseApi.get('/recommendation', {\n    headers: {\n      'Authorization': `Bearer ${jwt}`\n    }\n  })\n  console.dir(result.data)\n  return result.data\n}","import React, { useEffect, useReducer } from 'react'\nimport AppContext from './app-context'\nimport { reducerFunction } from './app-reducer'\nimport {\n  NEXT_QUESTION,\n  SAVE_ANSWER,\n  SET_JWT,\n  // PREVIOUS_QUESTION,\n  SET_RECOMMENDATIONS,\n  JUMP_TO_EMAIL,\n  SET_TOTAL_QUESTIONS\n} from './app-actions'\nimport { postFormData, getRecommendations } from '../QuestionnaireApp/apis'\n\nexport const AppStates = (props) => {\n  const initialState = {\n    currentQuestion: 1,\n    totalQuestions: 6,\n    answers: {},\n    recommendations: []\n  }\n\n  const [state, dispatchFn] = useReducer(reducerFunction, initialState)\n\n  useEffect(() => {\n    return () => { }\n  }, [])\n\n  const nextQuestion = async () => {\n    // document.querySelector('.ant-input').placeholder = \"\"\n    // document.querySelector('.ant-input').value = \"\"\n    if (state.currentQuestion === state.totalQuestions) {\n      const result = await postFormData(state.answers)\n      setJwt(result.jwt)\n      const recommendations = await getRecommendations(result.jwt)\n      console.log(recommendations);\n      dispatchFn({ type: SET_RECOMMENDATIONS, payload: recommendations })\n      // alert(`Form submitted \\n JWT ${result.jwt}`)\n      return\n    } else if (state.currentQuestion === 4 && state.answers.children === 'NO') {\n      console.log('Skip next, set current page to 6')\n      state.currentQuestion = 6\n      dispatchFn({ type: JUMP_TO_EMAIL })\n    } else {\n      dispatchFn({ type: NEXT_QUESTION })\n    }\n  }\n\n  const setTotalQuestions = (count) => {\n    dispatchFn({\n      type: SET_TOTAL_QUESTIONS,\n      payload: count\n    })\n  }\n\n  const saveAnswer = (key, value) => {\n    dispatchFn({\n      type: SAVE_ANSWER,\n      payload: {\n        key: key,\n        value: value,\n      }\n    })\n  }\n\n  const setJwt = (jwt) => {\n    dispatchFn({ type: SET_JWT, payload: jwt })\n  }\n\n  return (\n    <AppContext.Provider value={{\n      app: state,\n      reducerFn: dispatchFn,\n      nextQuestion,\n      setTotalQuestions,\n      saveAnswer,\n      setJwt\n    }}>\n      {props.children}\n    </AppContext.Provider>\n  )\n}\n","import React from 'react'\nimport './App.css';\nimport 'antd/dist/antd.css'\nimport { QuestionnaireApp } from './QuestionnaireApp'\nimport { AppStates } from './ContextStore/AppStates'\n\nfunction App() {\n  return (\n    <AppStates>\n      <div className=\"App\">\n        <QuestionnaireApp />\n      </div>\n    </AppStates>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}