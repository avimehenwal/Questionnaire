(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),s=n.n(c),o=(n(104),n(105),n(21)),i=n(34),u=n(131),l=n(49),j=n(134),d=n(5),b=u.a.Text,p=u.a.Title,O=function(e){var t=e.title,n=e.subtitel,r=e.currentQuestionIndex,a=e.total;return Object(d.jsxs)("header",{children:[Object(d.jsx)("br",{}),Object(d.jsxs)(l.a,{type:"flex",align:"middle",justify:"center",children:[Object(d.jsx)(p,{level:2,children:t}),Object(d.jsx)("br",{})]}),Object(d.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(d.jsxs)(b,{type:"primary",children:[n," !!! "]})}),Object(d.jsx)("br",{}),Object(d.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(d.jsxs)(b,{type:"primary",children:["question ",r,"/",a]})}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{})]})},x=function(e){var t=e.data,n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],s=a[1];return Object(d.jsxs)("footer",{children:[Object(d.jsx)("br",{}),Object(d.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(d.jsx)(j.a,{onChange:function(e){s(e.target.checked)},checked:c,children:"Log Debug Trace"})}),Object(d.jsx)("br",{}),c&&Object(d.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(d.jsx)("pre",{children:JSON.stringify(t,null,2)})})]})},m=n(130),h=n(96),f=n(98),y=n(132),g=n(133),v=n(135),w=Object(r.createContext)(),Q=function(e){var t=Object(r.useContext)(w),n=t.app,a=t.saveAnswer;Object(r.useEffect)((function(){var t=window.localStorage;null!==t.getItem(e.name)&&a(e.name,t.getItem(e.name))}),[n.currentQuestion,a,e.name]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(y.a,{name:e.name,value:n.answers[e.name],onChange:function(t){console.log(t.target.value),a(e.name,t.target.value)},placeholder:n.answers[n.currentQuestion]?n.answers[n.currentQuestion]:e.placeholder})})},S=function(e){var t=e.name,n=Object(f.a)(e,["name"]),a=Object(r.useState)(1),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useContext)(w),l=u.app,j=u.saveAnswer;Object(r.useEffect)((function(){var e=window.localStorage;null!==e.getItem(t)&&(j(t,e.getItem(t)),Object.keys(n).map((function(r){return n[r].toUpperCase()===e.getItem(t)?o(n[r]):null})))}),[l.currentQuestion,n,t,j]),console.log("VALUE SET TO "+s);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(g.a.Group,{onChange:function(e){console.log(e.target.value),o(e.target.value),j(t,e.target.value.toUpperCase())},value:s,name:t,children:Object(d.jsx)(v.b,{direction:"vertical",children:Object.keys(n).map((function(e){return Object(d.jsx)(g.a,{value:n[e],children:n[e]},e)}))})})})},E=function(e){var t=e.title,n=e.type,r=e.data,a=e.nextButtonCB,c=e.name;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(d.jsxs)(m.a,{title:t,bordered:!1,style:{width:500},children:[Object(d.jsx)("br",{}),"text"===n&&Object(d.jsx)(Q,Object(o.a)(Object(o.a)({},r),{},{name:c})),"select"===n&&Object(d.jsx)(S,Object(o.a)(Object(o.a)({},r),{},{name:c})),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(h.a,{type:"primary",onClick:a,children:"Next Question"})]})})})},T=u.a.Text,C=function(e){var t=e.data;return Object(d.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(d.jsx)(m.a,{title:"Recommendations",children:t.map((function(e){return Object(d.jsx)(m.a,{bordered:!0,style:{width:500},children:Object(d.jsxs)(v.b,{children:[Object(d.jsx)(T,{strong:!0,children:e.type}),Object(d.jsxs)(T,{children:[e.price.amount," ",e.price.periodicity]})]})},e.type)}))})})},k={title:"Questionnaire App",subtitel:"collect inputs from user and suggest recommendations"},I=[{title:"What's your first name?",type:"text",name:"firstName",data:{placeholder:"eg: avi"}},{title:"What's your Address?",type:"text",name:"address",data:{placeholder:"eg: abc, Berlin"}},{title:"What's your Occupation?",type:"select",name:"occupation",data:{1:"Employed",2:"Student",3:"Self_Employed"}},{title:"Do you have any children?",type:"select",name:"children",data:{1:"Yes",2:"No"}},{title:"How many children do you have?",type:"text",name:"numberOfChildren",data:{placeholder:"eg: 1"}},{title:"Whats your email?",type:"text",name:"email",data:{placeholder:"eg: abc@xyz.com"}}],A=function(){var e=Object(r.useContext)(w),t=e.app,n=e.nextQuestion,a=e.setTotalQuestions,c=Object(r.useState)(I),s=Object(i.a)(c,1)[0],u=Object(r.useState)(t.recommendations),l=Object(i.a)(u,2),j=l[0],b=l[1];return Object(r.useEffect)((function(){return a(I.length),b(t.recommendations),function(){}}),[s,t.recommendations,a]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(O,Object(o.a)(Object(o.a)({},k),{},{currentQuestionIndex:t.currentQuestion,total:t.totalQuestions})),Object(d.jsx)("main",{children:j.length>0?Object(d.jsx)(C,{data:j}):Object(d.jsx)("form",{name:"questions",method:"post",action:"/some-api",children:t.totalQuestions+1>t.currentQuestion&&Object(d.jsx)(E,Object(o.a)(Object(o.a)({},s[t.currentQuestion-1]),{},{nextButtonCB:n}))})}),Object(d.jsx)(x,{data:t})]})},N=n(37),_=n.n(N),B=n(55),U="SET_JWT",J="SAVE_ANSWER",L="NEXT_QUESTION",W="JUMP_TO_EMAIL",F="SET_TOTAL_QUESTIONS",M="SET_RECOMMENDATIONS",R=function(e,t){switch(t.type){case L:return Object(o.a)(Object(o.a)({},e),{},{currentQuestion:e.currentQuestion+1});case W:return e.answers.numberOfChildren=0,Object(o.a)(Object(o.a)({},e),{},{currentQuestion:6});case F:return Object(o.a)(Object(o.a)({},e),{},{totalQuestions:t.payload});case J:var n=t.payload.key,r=t.payload.value;return window.localStorage.setItem(n,r),console.log("LS:"+n+r),e.answers[n]="numberOfChildren"===n?parseInt(r):r,console.log(e),Object(o.a)({},e);case U:return Object(o.a)(Object(o.a)({},e),{},{jwt:t.payload});case M:return Object(o.a)(Object(o.a)({},e),{},{recommendations:t.payload});default:console.log("No case matched")}},D=n(94),P=n.n(D).a.create({baseURL:"https://challenge-dot-popsure-204813.appspot.com/",timeout:1e3,headers:{"Content-Type":"application/json"}}),q=function(){var e=Object(B.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hasOwnProperty("children")&&delete t.children,e.next=3,P.post("/user",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(B.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.get("/recommendation",{headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,console.dir(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=Object(r.useReducer)(R,{currentQuestion:1,totalQuestions:6,answers:{},recommendations:[]}),n=Object(i.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){return function(){}}),[]);var s=function(){var e=Object(B.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.currentQuestion!==a.totalQuestions){e.next=13;break}return e.next=3,q(a.answers);case 3:return t=e.sent,o(t.jwt),e.next=7,z(t.jwt);case 7:return n=e.sent,console.log(n),c({type:M,payload:n}),e.abrupt("return");case 13:4===a.currentQuestion&&"NO"===a.answers.children?(console.log("Skip next, set current page to 6"),a.currentQuestion=6,c({type:W})):c({type:L});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(e){c({type:U,payload:e})};return Object(d.jsx)(w.Provider,{value:{app:a,reducerFn:c,nextQuestion:s,setTotalQuestions:function(e){c({type:F,payload:e})},saveAnswer:function(e,t){c({type:J,payload:{key:e,value:t}})},setJwt:o},children:e.children})};var G=function(){return Object(d.jsx)(V,{children:Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(A,{})})})};n(127);s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.c714270f.chunk.js.map