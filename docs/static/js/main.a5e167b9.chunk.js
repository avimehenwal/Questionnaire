(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),s=n.n(c),o=(n(103),n(104),n(16)),i=n(38),u=n(130),l=n(49),j=n(5),d=u.a.Text,b=u.a.Title,p=function(e){var t=e.title,n=e.subtitel,r=e.currentQuestionIndex,a=e.total;return Object(j.jsxs)("header",{children:[Object(j.jsx)("br",{}),Object(j.jsxs)(l.a,{type:"flex",align:"middle",justify:"center",children:[Object(j.jsx)(b,{level:2,children:t}),Object(j.jsx)("br",{})]}),Object(j.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(j.jsxs)(d,{type:"primary",children:[n," !!! "]})}),Object(j.jsx)("br",{}),Object(j.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(j.jsxs)(d,{type:"primary",children:["question ",r,"/",a]})}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]})},O=n(129),m=n(95),x=n(97),h=n(131),f=n(132),y=n(133),g=Object(r.createContext)(),v=function(e){var t=Object(r.useContext)(g),n=t.app,a=t.saveAnswer;Object(r.useEffect)((function(){var t=window.localStorage;null!==t.getItem(e.name)&&a(e.name,t.getItem(e.name))}),[n.currentQuestion]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(h.a,{name:e.name,value:n.answers[e.name],onChange:function(t){console.log(t.target.value),a(e.name,t.target.value)},placeholder:n.answers[n.currentQuestion]?n.answers[n.currentQuestion]:e.placeholder})})},w=function(e){var t=e.name,n=Object(x.a)(e,["name"]),a=Object(r.useState)(1),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useContext)(g),l=u.app,d=u.saveAnswer;Object(r.useEffect)((function(){var e=window.localStorage;null!==e.getItem(t)&&(d(t,e.getItem(t)),Object.keys(n).map((function(r){n[r].toUpperCase()===e.getItem(t)&&o(n[r])})))}),[l.currentQuestion]),console.log("VALUE SET TO "+s);return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(f.a.Group,{onChange:function(e){console.log(e.target.value),o(e.target.value),d(t,e.target.value.toUpperCase())},value:s,name:t,children:Object(j.jsx)(y.b,{direction:"vertical",children:Object.keys(n).map((function(e){return Object(j.jsx)(f.a,{value:n[e],children:n[e]},e)}))})})})},Q=function(e){var t=e.title,n=e.type,r=e.data,a=e.nextButtonCB,c=e.name;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:Object(j.jsxs)(O.a,{title:t,bordered:!1,style:{width:500},children:[Object(j.jsx)("br",{}),"text"===n&&Object(j.jsx)(v,Object(o.a)(Object(o.a)({},r),{},{name:c})),"select"===n&&Object(j.jsx)(w,Object(o.a)(Object(o.a)({},r),{},{name:c})),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(m.a,{type:"primary",onClick:a,children:"Next Question"})]})})})},S=(u.a.Title,u.a.Text),E=function(e){var t=e.data;return Object(j.jsx)(l.a,{type:"flex",align:"middle",justify:"center",children:t.map((function(e){return Object(j.jsx)(O.a,{bordered:!0,style:{width:500},children:Object(j.jsxs)(y.b,{children:[Object(j.jsx)(S,{strong:!0,children:e.type}),Object(j.jsxs)(S,{children:[e.price.amount," ",e.price.periodicity]})]})},e.type)}))})},T={title:"Questionnaire App",subtitel:"collect inputs from user and suggest recommendations"},C=[{title:"What's your first name?",type:"text",name:"firstName",data:{placeholder:"eg: avi"}},{title:"What's your Address?",type:"text",name:"address",data:{placeholder:"eg: abc, Berlin"}},{title:"What's your Occupation?",type:"select",name:"occupation",data:{1:"Employed",2:"Student",3:"Self-Employed"}},{title:"Do you have any children?",type:"select",name:"children",data:{1:"Yes",2:"No"}},{title:"How many children do you have?",type:"text",name:"numberOfChildren",data:{placeholder:"eg: 1"}},{title:"Whats your email?",type:"text",name:"email",data:{placeholder:"eg: abc@xyz.com"}}],I=function(){var e=Object(r.useContext)(g),t=e.app,n=e.nextQuestion,a=e.setTotalQuestions,c=Object(r.useState)(C),s=Object(i.a)(c,1)[0],u=Object(r.useState)(t.recommendations),l=Object(i.a)(u,2),d=l[0],b=l[1];return Object(r.useEffect)((function(){return a(C.length),b(t.recommendations),function(){}}),[s,t.recommendations]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(p,Object(o.a)(Object(o.a)({},T),{},{currentQuestionIndex:t.currentQuestion,total:t.totalQuestions})),Object(j.jsx)("main",{children:d.length>0?Object(j.jsx)(E,{data:d}):Object(j.jsx)("form",{name:"questions",method:"post",action:"/some-api",children:t.totalQuestions+1>t.currentQuestion&&Object(j.jsx)(Q,Object(o.a)(Object(o.a)({},s[t.currentQuestion-1]),{},{nextButtonCB:n}))})})]})},A=n(36),N=n.n(A),k=n(55),U="SET_JWT",_="SAVE_ANSWER",B="NEXT_QUESTION",W="JUMP_TO_EMAIL",F="SET_TOTAL_QUESTIONS",J="SET_RECOMMENDATIONS",L=function(e,t){switch(t.type){case B:return Object(o.a)(Object(o.a)({},e),{},{currentQuestion:e.currentQuestion+1});case"PREVIOUS_QUESTION":return Object(o.a)(Object(o.a)({},e),{},{currentQuestion:e.currentQuestion-1});case W:return e.answers.numberOfChildren=0,Object(o.a)(Object(o.a)({},e),{},{currentQuestion:6});case F:return Object(o.a)(Object(o.a)({},e),{},{totalQuestions:t.payload});case _:var n=t.payload.key,r=t.payload.value;return window.localStorage.setItem(n,r),console.log("LS:"+n+r),e.answers[n]=r,console.log(e),Object(o.a)({},e);case U:return Object(o.a)(Object(o.a)({},e),{},{jwt:t.payload});case J:return Object(o.a)(Object(o.a)({},e),{},{recommendations:t.payload});default:console.log("No case matched")}},M=n(93),R=n.n(M).a.create({baseURL:"https://challenge-dot-popsure-204813.appspot.com/",timeout:1e3,headers:{"Content-Type":"application/json"}}),P=function(){var e=Object(k.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hasOwnProperty("children")&&delete t.children,e.next=3,R.post("/user",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(k.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/recommendation",{headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,console.dir(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=Object(r.useReducer)(L,{currentQuestion:1,totalQuestions:6,answers:{},recommendations:[]}),n=Object(i.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){return function(){}}),[]);var s=function(){var e=Object(k.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.currentQuestion!==a.totalQuestions){e.next=13;break}return e.next=3,P(a.answers);case 3:return t=e.sent,o(t.jwt),e.next=7,V(t.jwt);case 7:return n=e.sent,console.log(n),c({type:J,payload:n}),e.abrupt("return");case 13:4===a.currentQuestion&&"NO"===a.answers.children?(console.log("Skip next, set current page to 6"),a.currentQuestion=6,c({type:W})):c({type:B});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(e){c({type:U,payload:e})};return Object(j.jsx)(g.Provider,{value:{app:a,reducerFn:c,nextQuestion:s,setTotalQuestions:function(e){c({type:F,payload:e})},saveAnswer:function(e,t){c({type:_,payload:{key:e,value:t}})},setJwt:o},children:e.children})};var z=function(){return Object(j.jsx)(q,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(I,{})})})};n(126);s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.a5e167b9.chunk.js.map